<project>
  <licensing>
    <tag>ASL 2.0</tag>
    <file>NOTICE</file>
  </licensing>
  <module>
    <subDir>velocity-engine-core</subDir>
    <dependency>javacc</dependency>
    <dependency>commons-io</dependency>
    <dependency>commons-lang</dependency>
    <dependency>slf4j</dependency>
    <build>
      <ant>
        <run>
          [copy todir="${generatedSources}"]
            [fileset dir="${basedir}/src/main/parser"/]
          [/copy]
          [replace file="${generatedSources}/Parser.jjt" token="$${parser.debug}" value="false"/]
          [replace file="${generatedSources}/Parser.jjt" token="$${parser.package}" value="org.apache.velocity.runtime.parser"/]
          [replace file="${generatedSources}/Parser.jjt" token="$${parser.basename}" value="Standard"/]
          [replace file="${generatedSources}/Parser.jjt" token="$${parser.char.asterisk}" value="*"/]
          [replace file="${generatedSources}/Parser.jjt" token="$${parser.char.at}" value="@"/]
          [replace file="${generatedSources}/Parser.jjt" token="$${parser.char.dollar}" value="$"/]
          [replace file="${generatedSources}/Parser.jjt" token="$${parser.char.hash}" value="#"/]
          [java classname="jjtree" failonerror="true"]
            [arg value="-OUTPUT_DIRECTORY=${generatedSources}/org/apache/velocity/runtime/parser/node"/]
            [arg value="-NOBUILD_NODE_FILES"/]
            [arg value="-NOVISITOR"/]
            [arg value="-NODE_USES_PARSER"/]
            [arg value="-NODE_PACKAGE=org.apache.velocity.runtime.parser.node"/]
            [arg value="${generatedSources}/Parser.jjt"/]
          [/java]
          [java classname="javacc" failonerror="true"]
            [arg value="-OUTPUT_DIRECTORY=${generatedSources}/org/apache/velocity/runtime/parser"/]
            [arg value="-TOKEN_MANAGER_USES_PARSER"/]
            [arg value="${generatedSources}/org/apache/velocity/runtime/parser/node/Parser.jj"/]
          [/java]
          [delete file="${generatedSources}/org/apache/velocity/runtime/parser/node/Node.java"/]
          [delete file="${generatedSources}/org/apache/velocity/runtime/parser/ParseException.java"/]
          [delete file="${generatedSources}/org/apache/velocity/runtime/parser/CharStream.java"/]
        </run>
      </ant>
      <compiler>
        <addSourceRoot>src/main/java</addSourceRoot>
        <addSourceRoot>src/main/java-templates</addSourceRoot>
        <addResource>src/main/java-templates</addResource>
      </compiler>
    </build>
  </module>
</project>
